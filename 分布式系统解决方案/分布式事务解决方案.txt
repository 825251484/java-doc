⚫分布式系统和微服务的区别？
分布式系统是将一个系统，进行垂直拆分成若干个服务并独立部署。每个服务付责一个业务。例如将电商系统拆分成订单服务，库存服务，商品服务等
二微服务是更细粒度的拆分，比如将一个订单服务拆分成购物车服务，售后服务等等。


⚫CAP理论
CAP定理，又被叫作布鲁尔定理。对于设计分布式系统来说(不仅仅是分布式事务)的架构师来说，CAP就是你的入门理论。
C (一致性):对某个指定的客户端来说，读操作能返回最新的写操作。对于数据分布在不同节点上的数据上来说，如果在某个节点更新了数据，
          那么在其他节点如果都能读取到这个最新的数据，那么就称为强一致，如果有某个节点没有读取到，那就是分布式不一致。
A (可用性)：非故障的节点在合理的时间内返回合理的响应(不是错误和超时的响应)。可用性的两个关键一个是合理的时间，一个是合理的响应。
          合理的时间指的是请求不能无限被阻塞，应该在合理的时间给出返回。合理的响应指的是系统应该明确返回结果并且结果是正确的，这里的正确指的是比如应该返回50，而不是返回40。
P (分区容错性):当出现网络分区后，系统能够继续工作。打个比方，这里个集群有多台机器，有台机器网络出现了问题，但是这个集群仍然可以正常工作。

对于CP来说：放弃可用性，追求一致性和分区容错性，我们的zookeeper其实就是追求的强一致。
对于AP来说：放弃一致性(这里说的一致性是强一致性)，追求分区容错性和可用性，这是很多分布式系统设计时的选择，后面的BASE也是根据AP来扩展。


⚫为什么不能选择CA放弃P？
因为当发生网络分区问题时，我们无法保证可用性的同时，又保证数据的一致性。我们只能在可用性和数据一致性中间做选择


⚫BASE理论
BASE 是 Basically Available(基本可用)、Soft state(软状态)和 Eventually consistent (最终一致性)三个短语的缩写。是对CAP中AP的一个扩展，就是AP的基础上，要保证数据的最终一致性
基本可用：分布式系统在出现故障时，允许损失部分可用功能，保证核心功能可用。
软状态：允许系统中存在中间状态，这个状态不影响系统可用性，这里指的是CAP中的不一致。
最终一致：最终一致是指经过一段时间后，所有节点数据都将会达到一致。



⚫什么是分布式事务？
分布式事务就是在分布式系统中，服务与服务之间的调用要保持数据的一致性。要么全成功，要么全失败
官方：分布式系统会把一个应用系统拆分为可独立部署的多个服务，因此需要服务与服务之间远程协作才能完成事务操作，这种分布式系统环境下由不同的服务之间通过网络远程协作完成事务称之为分布式事务  


⚫分布式事务三大场景
1.两个服务，每个服务有自己的数据库
2.一个服务，使用多个数据库
3.两个服务，使用一个数据库，只要跨jvm进程就会涉及分布式事务

2pc

3pc

XA模式

AT模式

tcc模式
